<div class="card">
  <div class="card-body">
    <form (submit)="submit(frm)" #frm="ngForm">
      <div class="row">
        <div class="col-md-6">
          <div class="form-group">
            <label>Name</label>
            <input
              type="text"
              name="name"
              class="form-control"
              placeholder="Enter name"
              [(ngModel)]="topic.name"
              required
              #name="ngModel"
            />
            <div *ngIf="name.errors && (name.dirty || name.touched || isSubmitted)">
              <p [hidden]="!name.errors.required" style="color: red">Please enter category name!</p>
            </div>
          </div>
        </div>
        <div class="col-md-6">
          <div class="form-group">
            <label>Alias</label>
            <input
              class="form-control"
              name="alias"
              placeholder="Enter alias"
              [(ngModel)]="topic.alias"
              required
              #alias="ngModel"
            />
            <div *ngIf="alias.errors && (alias.dirty || alias.touched || isSubmitted)">
              <p [hidden]="!alias.errors.required" style="color: red">Please enter category alias!</p>
            </div>
          </div>
        </div>
        <div class="col-md-6">
          <div class="form-group">
            <label>Ordering</label>
            <input
              class="form-control"
              name="ordering"
              placeholder="Enter ordering"
              [(ngModel)]="topic.ordering"
              required
              #ordering="ngModel"
              [pattern]="'^[0-9][0-9]*$'"
            />
            <div *ngIf="ordering.errors && (ordering.dirty || ordering.touched || isSubmitted)">
              <p [hidden]="!ordering.errors.required" style="color: red">Please enter category ordering!</p>
              <p [hidden]="!ordering.errors.pattern" style="color: red">This minimum ordering is <b>0</b>!</p>
            </div>
          </div>
        </div>
        <div class="col-md-6" *ngIf="categories && categories.length > 0">
          <div class="form-group">
            <label>Category (*)</label>
            <ng-select
              [items]="categories"
              multiple="true"
              [hideSelected]="true"
              bindLabel="name"
              [closeOnSelect]="true"
              name="category"
              placeholder="Choose category"
              [(ngModel)]="topic.categoryIds"
              bindValue="_id"
              #categoryId="ngModel"
              required
              (change)="selectCategory($event)"
            >
            </ng-select>
            <div *ngIf="categoryId.errors && (categoryId.dirty || categoryId.touched || isSubmitted)">
              <p [hidden]="!categoryId.errors.required" style="color: red" translate>Please choose category!</p>
            </div>
          </div>
        </div>
        <div class="col-md-6" *ngIf="subjects && subjects.length > 0">
          <div class="form-group">
            <label>Subject (*)</label>
            <ng-select
              [items]="subjects"
              multiple="true"
              [hideSelected]="true"
              bindLabel="name"
              [closeOnSelect]="true"
              name="subject"
              placeholder="Choose subject"
              [(ngModel)]="topic.subjectIds"
              bindValue="_id"
              #subjectId="ngModel"
              required
            >
            </ng-select>
            <div *ngIf="subjectId.errors && (subjectId.dirty || subjectId.touched || isSubmitted)">
              <p [hidden]="!subjectId.errors.required" style="color: red" translate>Please choose subject!</p>
            </div>
          </div>
        </div>
        <div class="col col-md-12">
          <button type="submit" class="btn btn-primary">Save</button>
        </div>
      </div>
    </form>
  </div>
</div>
